const fs = require('fs');
const path = require('path');

const imagesDir = path.join(__dirname, '../public/images');
const manifestPath = path.join(__dirname, '../src/image-manifest.js');

fs.readdir(imagesDir, (err, files) => {
  if (err) {
    console.error('Error reading images directory:', err);
    return;
  }

  const imageNames = files.filter(file => {
    const ext = path.extname(file).toLowerCase();
    return ['.jpg', '.jpeg', '.png', '.gif', '.webp'].includes(ext);
  });

  const manifestContent = `
// This file is auto-generated by generate-image-manifest.js
// Do not modify this file directly.

const imageNames = ${JSON.stringify(imageNames, null, 2)};

export default imageNames;
`;

  fs.writeFile(manifestPath, manifestContent, err => {
    if (err) {
      console.error('Error writing image manifest:', err);
      return;
    }
    console.log('Image manifest generated successfully!');
  });
});